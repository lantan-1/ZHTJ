# 智慧党建系统服务层实现

本文档总结了智慧党建系统的服务层实现情况，包括各种功能模块的服务接口和实现类。

## 文件存储服务

### 接口：`FileService`

基础文件服务接口，定义了文件上传、删除、获取信息等基本操作。

### 实现类：`MinioFileServiceImpl`

使用MinIO对象存储实现的文件服务，支持以下功能：

- 文件上传：支持单文件和批量上传
- 文件分类：按照图片、文档、视频等类型进行分类存储
- 文件目录结构：使用`{文件类型}/{年}/{月}/{日}/{文件名}`的目录结构
- 缩略图生成：支持图片缩略图生成
- 文件信息获取：获取文件大小、类型等元数据
- 公共URL生成：生成带有过期时间的文件访问链接

## 邮件服务

### 接口：`EmailService`

邮件服务接口，定义了各种邮件发送方法。

### 实现类：`EmailServiceImpl`

使用Spring Boot Mail实现的邮件服务，支持以下功能：

- 简单文本邮件：发送纯文本内容邮件
- HTML邮件：支持发送HTML格式的邮件
- 附件邮件：支持发送带单个或多个附件的邮件
- 内联资源邮件：支持在HTML邮件中嵌入图片
- 模板邮件：使用Thymeleaf模板引擎生成邮件内容
- 批量邮件：支持批量发送邮件

## 短信服务

### 接口：`SmsService`

短信服务接口，定义了验证码发送、通知短信等方法。

### 实现类：`AliyunSmsServiceImpl`

使用阿里云短信服务实现的短信发送功能，支持以下功能：

- 验证码发送：发送短信验证码
- 通知短信：发送通知类短信
- 批量发送：支持批量发送短信
- 状态查询：查询短信发送状态
- 余额查询：查询短信账户余额（阿里云API不直接支持，需通过控制台查看）

## 消息队列服务

### 接口：`MessageQueueService`

消息队列服务接口，定义了消息发送、主题管理等方法。

### 实现类：`RocketMQServiceImpl`

使用RocketMQ实现的消息队列服务，支持以下功能：

- 同步消息：支持同步发送消息
- 异步消息：支持异步发送消息
- 延迟消息：支持设置不同级别的延迟发送
- 顺序消息：保证同一顺序ID的消息按顺序投递
- 事务消息：支持事务消息发送
- 主题管理：创建主题（删除主题需通过管理工具实现）

## 用户服务

### 接口：`UserService`

用户服务接口，定义了用户管理相关方法。

### 实现类：`UserServiceImpl`

用户服务实现，支持以下功能：

- 用户注册与登录
- 用户信息管理
- 密码修改
- 用户组织关系管理
- 用户统计分析

## 组织服务

### 接口：`OrganizationService`

组织机构服务接口，定义了组织管理相关方法。

### 实现类：`OrganizationServiceImpl`

组织机构服务实现，支持以下功能：

- 组织机构的增删改查
- 组织机构树形结构管理
- 组织成员管理

## 活动服务

### 接口：`ActivityService`

活动服务接口，定义了活动管理相关方法。

### 实现类：`ActivityServiceImpl`

活动服务实现，支持以下功能：

- 活动的创建、修改、查询和删除
- 活动报名和签到管理
- 活动统计分析

## 缓存服务

### 接口：`RedisService`

Redis缓存服务接口，定义了缓存操作相关方法。

### 实现类：`RedisServiceImpl`

Redis缓存服务实现，支持以下功能：

- 字符串操作：设置、获取、删除字符串值
- 哈希操作：设置、获取、删除哈希表中的字段
- 列表操作：向列表添加、获取、删除元素
- 集合操作：添加、获取、删除集合元素
- 有序集合操作：添加、获取、删除有序集合元素
- 键操作：检查键是否存在、设置过期时间、删除键等

## JWT令牌服务

### 接口：`JwtTokenService`

JWT令牌服务接口，定义了令牌生成、验证等方法。

### 实现类：`JwtTokenServiceImpl`

JWT令牌服务实现，支持以下功能：

- 令牌生成：根据用户信息生成JWT令牌
- 令牌验证：验证令牌的有效性
- 令牌刷新：刷新令牌的有效期
- 令牌撤销：使特定令牌失效

## 后续待实现服务

1. **定时任务服务**：使用Spring Task或Quartz实现定时任务调度
2. **统计分析服务**：实现各类数据统计分析功能
3. **导入导出服务**：实现Excel、PDF等格式的数据导入导出
4. **消息通知服务**：整合邮件、短信、站内信等多种通知方式 